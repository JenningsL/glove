#ifndef __MOTION_H
#define __MOTION_H
#include "stm32l1xx.h"
#include "spi_flash.h"
#define u8 uint8_t
#define u16 uint16_t
#define u32 uint32_t

//直接在手套上识别动作
//float theta[]={1.196311,-0.111228,0.176274,0.211851,-0.404912,-0.254909,-0.239260,-0.115853,0.156537,0.209089,-0.380525,-0.189583,-0.098680,-0.120339,0.135723,0.206450,-0.332732,-0.122201,0.005661,-0.123922,0.114213,0.203281,-0.291300,-0.050092,0.026563,-0.127842,0.093115,0.200733,-0.211033,0.052883,-0.174957,-0.132143,0.069885,0.199129,-0.178915,0.265491,-0.272545,-0.134696,0.046512,0.195516,-0.188982,0.335222,-0.296834,-0.134418,0.025180,0.189976,-0.208906,0.327530,0.025849,-0.130236,0.005288,0.183349,-0.202438,0.046472,0.116163,-0.126421,-0.015320,0.174941,-0.177323,-0.059348,0.107395,-0.122517,-0.036153,0.165481,-0.159603,-0.012344,0.154052,-0.117357,-0.055187,0.154587,-0.123336,0.114579,0.078198,-0.110751,-0.074240,0.143854,-0.126810,0.421297,0.029616,-0.100822,-0.091220,0.133863,-0.097300,0.219826,-0.182557,-0.090557,-0.107337,0.126687,-0.055776,0.138709,-0.112293,-0.079948,-0.122747,0.120349,-0.041223,0.107461,-0.252647,-0.068813,-0.136785,0.114995,-0.079650,-0.064426,-0.236443,-0.057536,-0.148164,0.108884,-0.080149,-0.136450,-0.244570,-0.048111,-0.157965,0.102672,-0.065494,-0.025810,-0.274457,-0.036533,-0.165865,0.094335,-0.038317,-0.076135,-0.178553,-0.022127,-0.172472,0.083793,0.033644,-0.203020,-0.107516,-0.011760,-0.176792,0.073029,0.162203,-0.350849,-0.142161,-0.006119,-0.180963,0.065459,0.292761,-0.318800,-0.188733,-0.000554,-0.186635,0.060047,0.183431,-0.161611,-0.145760,0.011015,-0.190000,0.050935,0.064518,-0.230070,-0.237630,0.026322,-0.189046,0.041362,0.230769,-0.315896,-0.147038,0.036070,-0.189295,0.034857,0.354511,-0.382552,-0.166219,0.040948,-0.190613,0.029970,0.349643,-0.391225,-0.142641,0.040621,-0.192597,0.025459,0.219425,-0.265753,-0.412112,0.044109,-0.190305,0.020334,0.195354,-0.142421,-0.365707,0.049294,-0.186200,0.016582,0.304988,-0.175245,-0.184108,0.053274,-0.182478,0.014469,0.323383,-0.274467,-0.056375,0.053975,-0.177945,0.012459,0.257990,-0.181670,0.131808,0.052820,-0.173299,0.008851,0.242529,-0.122657,-0.092976,0.052291,-0.167351,0.003498,0.286138,-0.034480,-0.266144,0.053421,-0.159629,-0.002157,0.293459,0.063700,-0.382213,0.055522,-0.151973,-0.006921,0.280984,0.020146,-0.036076,0.058657,-0.144588,-0.010718,0.293680,0.051583,0.093732,0.064997,-0.136305,-0.014686,0.269618,0.033573,-0.186489,0.071246,-0.127681,-0.017571,0.225528,0.002699,-0.243159,0.075558,-0.118239,-0.018422,0.160153,0.020293,-0.103476,0.079707,-0.108674,-0.017896,0.156184,0.096096,0.124211,0.089232,-0.097739,-0.018006,0.122950,0.061152,0.281640,0.099064,-0.084813,-0.016918,0.067874,0.026922,0.198151,0.103412,-0.074276,-0.012309,0.039823,0.067045,-0.050342,0.105188,-0.065691,-0.006216,0.015542,0.062267,-0.074169,0.109369,-0.056268,-0.001595,-0.007174,0.042800,0.055943,0.114575,-0.047500,0.003365,0.001181,-0.007556,-0.100426,0.118942,-0.039471,0.008868,-0.001479,-0.014026,-0.243497,0.121132,-0.034347,0.013682,0.001183,0.009343,-0.190612,0.121900,-0.030341,0.017388,-0.003086,0.006564,-0.164648,0.122461,-0.026309,0.021191,-0.026245,0.051253,-0.136294,0.124691,-0.020008,0.024671,-0.015709,0.054913,0.008138,0.124625,-0.015888,0.029523,0.025111,0.044098,-0.001447,0.123809,-0.014531,0.034523,0.026796,0.057793,-0.035011,0.122409,-0.014655,0.039451,0.027887,0.053695,-0.074266,0.120177,-0.015211,0.042650,0.016791,0.061338,0.007256,0.118737,-0.015801,0.044556,0.049658,-0.052153,-0.086120,0.115723,-0.017109,0.045995,0.076580,-0.111571,0.091276,0.110407,-0.016909,0.047137,0.101378,-0.034988,-0.003470,0.105405,-0.018765,0.049143,0.097962,0.096250,-0.138089,0.101557,-0.020503,0.049956,0.112790,0.128236,0.133417,0.095151,-0.021984,0.049597,0.125958,-0.020533,0.155320,0.087465,-0.023050,0.047709,0.118054,0.158801,0.045129,0.081495,-0.023824,0.045641,0.123507,0.076528,0.192712,0.076496,-0.024089,0.042296,0.096509,0.130356,-0.227432,0.071632,-0.024238,0.039447,0.076676,0.133656,-0.124213,0.066623,-0.023911,0.036508,0.089563,0.019140,-0.077704,0.062739,-0.022894,0.034079,0.077853,0.076309,-0.087788,0.059001,-0.020747,0.032154,0.055331,0.120392,-0.123231,0.055046,-0.017639,0.030321,0.023425,0.087409,-0.343436,0.052235,-0.014462,0.028517,0.059434,0.116256,-0.102461,0.049117,-0.012950,0.027365,0.075833,-0.029740,-0.270882,0.046856,-0.009819,0.026113,0.040201,0.037724,0.041429,0.044991,-0.005422,0.025356,0.012783,0.089125,-0.105645,0.042221,-0.000307,0.024780,-0.004711,0.136168,-0.243956,0.040652,0.005432,0.024993,-0.007413,0.041203,-0.095916,0.038093,0.010870,0.024811,-0.003095,0.066589,-0.086081,0.034884,0.016581,0.024273,-0.049605,0.058019,0.107523,0.033648,0.020914,0.023625,-0.024511,0.032943,0.046315,0.033049,0.026953,0.021566,-0.005976,0.085896,0.032277,0.031271,0.032735,0.019731,0.021367,0.089660,0.052573,0.029781,0.038026,0.018115,0.066399,0.084217,0.077609,0.029884,0.042817,0.016518,0.052632,0.168930,-0.087853,0.030117,0.047853,0.014234,0.051745,0.138991,-0.004633,0.030617,0.052753,0.012221,0.102997,-0.003537,0.088444,0.031330,0.058174,0.008757,0.155820,-0.016616,0.068749,0.031256,0.063522,0.006421,0.221820,-0.125315,-0.168784,0.031647,0.068699,0.004789,0.160421,0.131376,0.128333,0.031186,0.073707,0.003868,0.104064,0.232769,-0.000148,0.031543,0.078860,0.002485,0.130246,0.058638,0.155933,0.031952,0.084180,0.001800,0.369955,-0.105412,-0.219108,0.031348,0.089003,0.002565,0.391859,-0.433180,0.079771,0.030188,0.093310,0.004006,0.309410,0.023618,0.212779,0.028904,0.098294,0.004906,0.251554,0.298358,0.306397,0.029292,0.103460,0.005176,0.306888,0.097469,-0.414839,0.028955,0.109514,0.006445,0.521620,-0.071181,-0.565095,0.028426,0.114458,0.009877,0.489861,-0.297488,-0.472142,0.027943,0.118809,0.014133,0.372821,0.109633,-0.373024,0.026530,0.123394,0.018333,0.236247,0.369435,-0.032268};
//float uj[]={3764.691667,-1566.275000,12576.100000,-2082.650000,-662.658333,-150.616667,3833.483333,-1755.416667,12157.825000,-1967.000000,-641.200000,-116.400000,3912.900000,-1955.275000,11710.816667,-1902.733333,-602.625000,-118.491667,4009.916667,-2161.750000,11229.491667,-1855.641667,-606.883333,-133.433333,4111.841667,-2379.116667,10712.800000,-1799.941667,-587.658333,-99.233333,4219.316667,-2611.800000,10174.100000,-1682.158333,-564.083333,-75.616667,4330.233333,-2853.083333,9619.466667,-1536.541667,-506.200000,-97.025000,4459.025000,-3103.358333,9049.450000,-1380.191667,-414.183333,-144.225000,4608.416667,-3363.258333,8472.375000,-1210.966667,-396.983333,-174.191667,4762.375000,-3629.508333,7898.975000,-1067.475000,-352.033333,-152.758333,4909.500000,-3905.691667,7332.908333,-998.891667,-257.650000,-101.291667,5059.191667,-4179.275000,6766.641667,-911.125000,-193.350000,-92.716667,5219.700000,-4444.900000,6202.550000,-784.741667,-182.625000,-73.416667,5384.050000,-4716.008333,5658.300000,-634.741667,-157.000000,-62.750000,5544.425000,-5002.508333,5143.150000,-497.700000,-137.608333,-52.141667,5701.116667,-5292.466667,4657.883333,-446.291667,-88.316667,-36.991667,5865.166667,-5579.383333,4188.683333,-384.191667,-13.358333,-30.583333,6032.133333,-5861.741667,3729.066667,-309.225000,-13.400000,-28.441667,6189.325000,-6136.733333,3280.825000,-199.916667,-15.475000,-19.916667,6337.266667,-6408.216667,2847.883333,-90.633333,38.075000,-24.166667,6485.025000,-6673.908333,2444.533333,3.666667,61.675000,-17.691667,6625.375000,-6918.608333,2092.525000,78.633333,68.116667,-2.691667,6749.658333,-7138.283333,1791.166667,123.666667,95.941667,5.841667,6857.783333,-7340.741667,1544.483333,192.216667,119.558333,1.575000,6962.225000,-7519.325000,1350.875000,269.341667,132.408333,10.158333,7063.558333,-7672.150000,1194.141667,318.625000,115.291667,10.225000,7156.291667,-7799.600000,1079.300000,367.925000,128.158333,1.625000,7228.900000,-7907.891667,1010.816667,447.166667,143.166667,16.625000,7278.158333,-7995.400000,978.408333,511.450000,143.183333,12.391667,7320.900000,-8064.433333,971.008333,575.700000,153.883333,33.791667,7362.541667,-8109.241667,990.850000,635.691667,153.841667,46.691667,7391.250000,-8144.366667,1047.291667,665.725000,177.391667,31.741667,7398.450000,-8172.383333,1137.208333,753.508333,173.116667,18.875000,7393.475000,-8183.583333,1246.341667,807.066667,198.833333,23.150000,7383.741667,-8170.000000,1370.608333,849.983333,196.750000,35.975000,7369.241667,-8139.941667,1518.941667,877.783333,201.066667,55.308333,7340.175000,-8105.783333,1708.733333,909.958333,226.708333,59.558333,7303.025000,-8067.058333,1937.350000,937.783333,218.216667,48.841667,7265.950000,-8022.758333,2195.608333,961.325000,233.133333,27.475000,7218.516667,-7971.466667,2485.708333,989.183333,239.591667,8.266667,7157.133333,-7916.108333,2797.708333,969.866667,286.658333,23.191667,7090.808333,-7854.008333,3122.575000,912.075000,329.500000,18.875000,7028.350000,-7779.833333,3448.650000,903.475000,320.950000,25.300000,6962.558333,-7696.058333,3781.966667,920.650000,235.233333,12.341667,6878.916667,-7605.600000,4126.400000,933.475000,232.975000,-28.308333,6788.941667,-7510.933333,4485.066667,894.941667,254.525000,-43.366667,6711.341667,-7408.991667,4840.833333,856.408333,295.200000,-34.808333,6648.850000,-7294.733333,5185.241667,854.275000,250.200000,-51.933333,6578.200000,-7169.958333,5525.558333,860.700000,207.433333,-62.591667,6498.641667,-7036.016667,5869.458333,849.958333,226.708333,-58.300000,6422.650000,-6891.400000,6209.216667,811.566667,258.841667,-54.041667,6351.966667,-6736.341667,6533.366667,775.033333,282.375000,-51.875000,6290.600000,-6576.408333,6841.158333,766.466667,241.675000,-47.683333,6226.016667,-6408.016667,7138.175000,796.383333,192.458333,-56.258333,6155.383333,-6228.591667,7428.141667,762.158333,198.866667,-60.433333,6084.683333,-6043.191667,7699.458333,747.125000,222.425000,-32.641667,6023.441667,-5842.800000,7938.875000,719.308333,230.933333,-49.833333,5964.358333,-5632.691667,8147.858333,736.458333,158.041667,-54.125000,5897.083333,-5421.808333,8347.075000,719.316667,119.600000,-54.075000,5832.858333,-5213.950000,8529.216667,691.441667,149.650000,-28.358333,5780.908333,-4987.641667,8682.441667,644.341667,183.883333,-47.616667,5737.566667,-4751.641667,8818.025000,652.841667,156.033333,-45.608333,5685.608333,-4524.200000,8956.341667,646.458333,115.383333,-56.241667,5628.025000,-4308.725000,9093.216667,597.175000,143.258333,-36.958333,5591.900000,-4092.808333,9207.350000,532.941667,173.200000,-34.800000,5560.425000,-3871.658333,9299.633333,490.100000,141.075000,-17.783333,5518.816667,-3650.841667,9384.450000,490.108333,113.250000,-39.083333,5458.366667,-3437.691667,9472.708333,485.783333,121.833333,-26.258333,5403.733333,-3230.775000,9554.933333,447.258333,141.083333,-21.991667,5359.391667,-3022.975000,9621.116667,402.308333,143.200000,-17.675000,5315.425000,-2818.325000,9674.183333,385.125000,119.666667,-11.325000,5268.325000,-2616.983333,9730.708333,383.025000,136.741667,-17.716667,5212.408333,-2420.000000,9790.941667,329.450000,147.500000,-19.816667,5165.875000,-2226.491667,9846.966667,295.208333,168.916667,-4.783333,5130.350000,-2037.816667,9891.475000,267.300000,160.308333,-0.433333,5094.291667,-1853.691667,9924.325000,269.466667,117.458333,-15.375000,5046.458333,-1681.416667,9957.391667,273.708333,83.208333,-13.308333,4990.308333,-1516.241667,9993.350000,260.866667,87.508333,-9.100000,4943.341667,-1351.383333,10023.625000,235.150000,108.908333,-4.775000,4913.700000,-1177.766667,10041.575000,224.475000,104.616667,-15.400000,4883.283333,-1017.883333,10058.983333,224.441667,72.466667,-2.625000,4839.925000,-866.116667,10067.841667,226.591667,48.941667,-13.316667,4793.625000,-716.233333,10067.200000,226.608333,72.433333,-4.733333,4757.308333,-560.150000,10055.333333,200.891667,72.500000,12.300000,4718.116667,-406.508333,10051.541667,181.608333,85.308333,-0.441667,4677.783333,-258.566667,10056.908333,192.283333,74.600000,10.191667,4638.583333,-118.133333,10057.416667,187.975000,48.941667,3.791667,4601.250000,19.600000,10057.133333,185.825000,44.583333,-6.858333,4567.641667,155.683333,10055.933333,160.150000,51.100000,-8.983333,4531.808333,283.500000,10050.716667,147.391667,48.933333,-6.883333,4495.033333,404.050000,10045.350000,153.708333,57.533333,-11.066667,4465.675000,522.433333,10032.616667,168.658333,40.300000,-6.925000,4435.550000,636.325000,10019.633333,170.816667,27.408333,-4.741667,4401.566667,747.475000,10009.108333,157.966667,42.516667,-13.308333,4366.033333,852.708333,10002.116667,140.866667,59.658333,-2.558333,4336.758333,957.166667,10001.008333,138.716667,55.441667,-2.583333,4312.650000,1058.050000,10005.750000,155.841667,40.400000,1.741667,4296.708333,1160.975000,10012.283333,147.275000,40.383333,-11.141667,4279.158333,1259.633333,10017.841667,140.783333,40.341667,-0.483333,4252.341667,1354.941667,10024.433333,113.050000,51.125000,-15.383333};
//int sj[]={21936,24892,42155,6169,3083,3085,21419,24778,40575,6170,3856,3600,20906,24714,38922,6169,4112,4113,20673,24621,37271,6169,2571,3342,20423,24418,35905,7197,3085,1800,20219,24364,34290,7453,4627,2314,19948,24143,33245,5655,3856,1800,19654,23891,32397,5398,2314,2828,19385,23644,31714,5655,4884,4884,19056,23671,31902,6169,5911,3342,18775,23698,32367,6683,2828,2057,18542,23787,32782,6426,2057,3599,18316,23788,33096,5398,1543,3342,18086,23787,33420,5141,2057,1800,17852,23761,33279,5141,3599,1286,17675,23753,33078,5141,3856,1286,17428,23724,32863,4627,3085,1029,17185,23707,32677,3599,2314,1285,17022,23673,32468,3599,3856,1800,17146,23641,32576,3856,4370,2571,17349,23639,32815,3599,5141,3085,17504,23730,33045,3856,5398,3085,17597,23809,33237,3856,6169,3342,17720,23865,33758,3856,6169,3342,17803,23908,34505,4370,6169,3856,17871,23949,35055,5141,6169,4369,17961,23923,35522,5398,5912,4370,18149,23851,35951,5141,4370,2571,18454,23799,36366,4370,1800,1286,18813,23731,36542,3856,2057,1800,19035,23691,36790,4884,2057,1800,19146,23569,36984,5398,2315,2314,19350,23535,37115,5141,2828,1800,19690,23482,37041,4370,2571,1286,20000,23442,36839,4370,2828,1029,20219,23372,36619,5141,2571,1800,20358,23339,36348,5141,3599,2314,20502,23331,35948,4370,3085,2314,20691,23302,35431,4627,3085,1543,20878,23549,35012,4627,3599,1800,21070,23949,34696,4627,3342,2057,21603,24591,34504,5398,3599,1800,22152,25219,34280,6426,3342,2057,22523,25786,34066,7197,3599,2057,22996,26257,34250,7454,2571,2057,23497,26586,34721,7711,2314,2057,23901,26797,35173,7968,2058,1800,23978,26900,35467,8739,4113,1800,23753,26975,35617,7968,3085,1543,23522,26863,35724,7711,3342,1543,23431,26735,35779,7197,3599,1800,23397,26548,35756,7197,3599,2057,23428,26335,35634,6940,3599,1543,23301,26869,35444,7197,2828,1543,22975,27292,35202,6683,3342,1800,22845,27715,34856,6169,4370,1800,22772,28102,34559,5912,3085,1286,22675,28430,34680,5141,5141,1543,22974,28675,34736,5655,4369,1543,23521,28917,34919,4370,3085,1286,23921,29099,35200,4884,5655,1029,24322,29234,35166,4113,2829,1286,24595,29373,34908,4370,3599,1029,24827,29509,34811,4627,2571,1030,24966,29576,34854,4884,3085,1286,25000,29606,34743,4884,2571,1286,24838,29650,34518,4884,1800,772,24684,29624,34453,4883,2571,772,24595,29635,34650,4884,2314,772,24577,29678,34893,4627,2571,772,24478,29645,34941,5398,2571,772,24292,29595,34728,4884,2314,772,24150,29598,34783,4628,2828,772,23995,29601,34885,4884,2828,515,23833,29593,34756,4884,2572,515,23630,29550,34501,4884,2058,515,23348,29532,34298,4884,3085,513,23079,29588,34199,4370,3599,772,22812,29651,34124,4627,3342,772,22540,29642,34078,4884,2058,515,22345,29628,34310,4370,2571,515,22205,29639,34499,4113,2571,515,22110,29660,34515,4370,1543,515,22073,29614,34364,4370,1800,511,22070,29576,34384,4370,2314,772,22046,29561,34588,4370,2314,515,22163,29525,35259,3085,2571,515,22209,29485,35682,3856,2827,515,22265,29475,36044,4370,1799,512,22250,29491,36227,4627,2314,514,22319,29495,36486,4113,2057,515,22364,29520,36686,2571,2828,514,22383,29527,36722,3085,1543,511,22383,29545,36697,3342,1800,513,22402,29553,36793,3342,1798,513,22427,29534,36664,2828,1543,513,22456,29520,36527,2314,1543,514,22446,29512,36514,2828,1543,513,22436,29489,36443,3342,1286,513,22414,29470,36172,3856,1029,513};

void getParamById(int id);//根据动作id获取相关参数,待写
void setParamById(int id);
void nomarlize(float *rawData);//归一化数据
float test(float *dataArr);//判断是否某个动作
//将短数据延展
void expand(float *oldData,float * newData,int oldLen);
void compress(float *excessData,float *newData,int excessLen);
#endif